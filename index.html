<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CYC Heritage SMP</title>
    <link rel="icon" type="image/png" href="icon.png">
    <link rel="stylesheet" href="./styles.css">
</head>
<body>

<header style="height: 70px; display: flex; align-items: center; justify-content: space-between; padding: 10px 20px; background-color: #333;">
    <a href="./index.html" style="color: white; text-decoration: none; font-size: 1.5em;">
        üåç CYC Heritage SMP
    </a>
    <div>
        <a href="./index.html" style="
        background-color: #ff0000;
        color: white;
        padding: 8px 16px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: bold;
        transition: background-color 0.3s;
        margin-left: 16px;
        text-align: center;
    " onmouseover="this.style.backgroundColor='#cc0000';" onmouseout="this.style.backgroundColor='#ff0000';">
            Home
        </a>
        <a href="./news.html" style="
        background-color: #ff0000;
        color: white;
        padding: 8px 16px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: bold;
        transition: background-color 0.3s;
        margin-left: 16px;
        text-align: center;
    " onmouseover="this.style.backgroundColor='#cc0000';" onmouseout="this.style.backgroundColor='#ff0000';">
            News
        </a>
    </div>
</header>


<section class="server-info">
    <h2>Server Information</h2>
    <p><strong>Minecraft Java IP:</strong> partner-indonesia.gl.joinmc.link</p>
    <p><strong>Minecraft Bedrock IP:</strong> monday-moore.gl.at.ply.gg</p>
    <p><strong>Minecraft Bedrock Port:</strong> 15940</p>
</section>

<section class="server-status" style="display: flex; gap: 20px;">
    <div id="status-section" style="flex: 0 0 250px;"> <!-- fixed width for status -->
        <h2>Server Status</h2>
        <p><strong>Status:</strong> <span id="status">Loading...</span></p>
        <p><strong>Players Online:</strong> <span id="players">Loading...</span></p>
    </div>
    <div id="player-list" style="flex: 1; max-height: 100%; overflow-y: auto; display: flex; flex-wrap: wrap; gap: 10px; background: rgba(255,255,255,0.1); padding: 10px; border-radius: 10px;">
        <!-- Players will appear here -->
    </div>
</section>



<footer>
    <p style="position: absolute; left: 10px;">&copy; 2025 CYC Heritage SMP</p>
    <a style="margin-right: 10px;" href="https://www.youtube.com/@CYCHeritageSMP" target="_blank" class="youtube-icon" aria-label="YouTube Channel">
        <img src="https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/youtube.svg" alt="YouTube" width="28" height="28">
    </a>
</footer>

<script>
    async function fetchServerStatus() {
        const statusEl = document.getElementById('status');
        const playersEl = document.getElementById('players');
        const playerListEl = document.getElementById('player-list');

        try {
            const ip = "partner-indonesia.gl.joinmc.link";

            const response = await fetch('https://api.mcsrvstat.us/3/' + ip);
            const data = await response.json();

            statusEl.style.color = data.online ? 'white' : 'red';
            statusEl.textContent = data.online ? 'Loading...' : 'Offline ‚ùå';
            playersEl.textContent = data.online ? 'Loading...' : '0';

            if (!data.online) return;

            const response2 = await fetch('https://mc-api.net/v3/server/ping/' + ip);
            const data2 = await response2.json();

            // Update status
            statusEl.style.color = data.online ? 'lime' : 'red';
            statusEl.textContent = data.online ? 'Online ‚úÖ' : 'Offline ‚ùå';
            playersEl.textContent = data.online ? `${data.players.online} / ${data.players.max}` : '0';

            playerSample = data2.players.sample;

            // Update player list
            playerListEl.innerHTML = ''; // Clear previous
            if (data2.online && data2.players.sample) {
                data2.players.sample.forEach(player => {
                    const playerDiv = document.createElement('div');
                    playerDiv.classList.add("player");
                    playerDiv.style.cursor = "pointer";
                    playerDiv.style.textAlign = 'center';
                    playerDiv.style.width = '80px';
                    playerDiv.style.height = '80px';
                    playerDiv.style.background = 'rgba(255,255,255,0.1)';
                    playerDiv.style.borderRadius = '10px';
                    playerDiv.style.display = 'flex';
                    playerDiv.style.flexDirection = 'column';
                    playerDiv.style.alignItems = 'center';
                    playerDiv.style.justifyContent = 'center';

                    const img = document.createElement('img');

                    if (player.name.indexOf(".") === -1) {
                        playerDiv.addEventListener('click', () => {
                            window.open(`https://namemc.com/profile/${player.name}`, '_blank');
                        });

                        img.src = `https://minotar.net/helm/${player.name}/50`; // fake head
                        img.alt = player.name;
                        img.style.borderRadius = '10%';
                        img.style.display = 'block';
                        img.style.marginBottom = '5px';
                    } else {
                        playerDiv.addEventListener('click', (e) => {
                            // Remove any existing tooltip
                            const existing = document.querySelector(".tooltip-note");
                            if (existing) existing.remove();

                            // Create tooltip element
                            const tooltip = document.createElement("div");
                            tooltip.className = "tooltip-note";
                            tooltip.textContent = "This player is a bedrock player, no profile available.";

                            // Position near cursor
                            tooltip.style.position = "absolute";
                            tooltip.style.left = e.pageX + 10 + "px";
                            tooltip.style.top = e.pageY + 10 + "px";
                            tooltip.style.background = "rgba(0,0,0,0.8)";
                            tooltip.style.color = "#fff";
                            tooltip.style.padding = "6px 10px";
                            tooltip.style.borderRadius = "6px";
                            tooltip.style.fontSize = "14px";
                            tooltip.style.pointerEvents = "none";
                            tooltip.style.zIndex = "1000";
                            tooltip.style.transition = "opacity 0.3s";

                            document.body.appendChild(tooltip);

                            // Fade out after 2s
                            setTimeout(() => {
                                tooltip.style.opacity = "0";
                                setTimeout(() => tooltip.remove(), 300);
                            }, 2000);
                        });

                        img.src = "https://minotar.net/helm/MHF_Steve/50"; // fake head
                        img.alt = player.name;
                        img.style.borderRadius = '10%';
                        img.style.display = 'block';
                        img.style.marginBottom = '5px';
                    }



                    const name = document.createElement('span');
                    name.textContent = player.name;
                    name.style.fontSize = '0.7em';
                    name.style.wordBreak = 'break-word';

                    playerDiv.appendChild(img);
                    playerDiv.appendChild(name);
                    playerListEl.appendChild(playerDiv);
                });
            }
        } catch (error) {
            console.error('Error fetching server status:', error);
            statusEl.textContent = 'Error ‚ùå';
            statusEl.style.color = 'red'
            playersEl.textContent = '-';
            playerListEl.innerHTML = '';
        }
    }

    fetchServerStatus();
    setInterval(fetchServerStatus, 30000);
</script>

</body>
</html>
