<!DOCTYPE html>
        <html lang="en">
        <head>
        <meta charset="UTF-8">
        <title>CYC Heritage SMP</title>
    <link rel="icon" type="image/png" href="icon.png">
    <link rel="stylesheet" href="./styles.css">
</head>
<body>

<header style="height: 70px; display: flex; align-items: center; justify-content: space-between; padding: 10px 20px; background-color: #333;">
    <a href="./index.html" style="color: white; text-decoration: none; font-size: 1.5em;">
        üåç CYC Heritage SMP
    </a>
    <div>
        <a href="./index.html" style="
        background-color: #ff0000;
        color: white;
        padding: 8px 16px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: bold;
        transition: background-color 0.3s;
        margin-left: 16px;
        text-align: center;
    " onmouseover="this.style.backgroundColor='#cc0000';" onmouseout="this.style.backgroundColor='#ff0000';">
            Home
        </a>
        <a href="./news.html" style="
        background-color: #ff0000;
        color: white;
        padding: 8px 16px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: bold;
        transition: background-color 0.3s;
        margin-left: 16px;
        text-align: center;
    " onmouseover="this.style.backgroundColor='#cc0000';" onmouseout="this.style.backgroundColor='#ff0000';">
            News
        </a>
        <a href="./teams.html" style="
        background-color: #ff0000;
        color: white;
        padding: 8px 16px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: bold;
        transition: background-color 0.3s;
        margin-left: 16px;
        text-align: center;
    " onmouseover="this.style.backgroundColor='#cc0000';" onmouseout="this.style.backgroundColor='#ff0000';">
            Teams
        </a>
        <a href="./gallery.html" style="
        background-color: #ff0000;
        color: white;
        padding: 8px 16px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: bold;
        transition: background-color 0.3s;
        margin-left: 16px;
        text-align: center;
    " onmouseover="this.style.backgroundColor='#cc0000';" onmouseout="this.style.backgroundColor='#ff0000';">
            Gallery
        </a>
    </div>
</header>

<h1>Want to register a team? Contact me at jackhaney22@gmail.com</h1>

<footer>
    <p style="position: absolute; left: 10px;">&copy; 2025 CYC Heritage SMP</p>

    <!-- Discord -->
    <a href="https://discord.gg/hZG2TCzyTB"
       target="_blank"
       class="icon"
       aria-label="Discord Server">
        <img src="Discord-white.svg" class="white" alt="Discord">
        <img src="Discord.svg" class="color" alt="Discord">
    </a>

    <!-- QuickChat -->
    <a href="https://qc1159.github.io/Quick-Chat/?chatwith=CYCHeritageSMP"
       target="_blank"
       class="icon"
       aria-label="Quick Chat Page">
        <img src="QuickChat-white.svg" class="white" alt="QuickChat">
        <img src="QuickChat.svg" class="color" alt="QuickChat">
    </a>

    <!-- YouTube -->
    <a href="https://www.youtube.com/@CYCHeritageSMP"
       target="_blank"
       class="icon"
       aria-label="YouTube Channel">
        <img src="Youtube-white.svg" class="white" alt="YouTube">
        <img src="Youtube.svg" class="color" alt="YouTube">
    </a>
</footer>

<script>
    document.addEventListener("DOMContentLoaded", async () => {
        const csvUrl = "https://docs.google.com/spreadsheets/d/1M0rXV5xH1FOOn49ha6fBrvpfvQPbtJMvkbVkZ9D4HOQ/export?format=csv&id=1M0rXV5xH1FOOn49ha6fBrvpfvQPbtJMvkbVkZ9D4HOQ&gid=0";

        const response = await fetch(csvUrl);
        const text = await response.text();
        const rows = parseCSV(text);

        // Filter out empty rows
        const validRows = rows.filter(r => r.some(cell => cell.trim() !== ""));

        const header = document.querySelector("header");

        validRows.forEach(([_1, _2, _3, title, members]) => {
            if (!title && !members) return;

            const section = document.createElement("section");

            const h2 = document.createElement("h2");
            h2.textContent = title || "Untitled";

            const memberGrid = document.createElement("div");
            memberGrid.style.display = "flex";
            memberGrid.style.flexWrap = "wrap";
            memberGrid.style.gap = "10px";
            memberGrid.style.marginTop = "10px";
            memberGrid.style.padding = "10px";
            memberGrid.style.borderRadius = "10px";
            memberGrid.style.background = "rgba(255,255,255,0.1)";

            // Split members by comma
            if (members) {
                members.split(",").map(m => m.trim()).forEach(member => {
                    if (!member) return;

                    const playerDiv = document.createElement("div");
                    playerDiv.classList.add("player");
                    playerDiv.style.cursor = "pointer";
                    playerDiv.style.textAlign = 'center';
                    playerDiv.style.width = '80px';
                    playerDiv.style.height = '80px';
                    playerDiv.style.background = 'rgba(255,255,255,0.1)';
                    playerDiv.style.borderRadius = '10px';
                    playerDiv.style.display = 'flex';
                    playerDiv.style.flexDirection = 'column';
                    playerDiv.style.alignItems = 'center';
                    playerDiv.style.justifyContent = 'center';

                    const img = document.createElement("img");

                    if (member.indexOf(".") === -1) {
                        // Java edition
                        playerDiv.addEventListener('click', () => {
                            window.open(`https://namemc.com/profile/${member}`, '_blank');
                        });

                        img.src = `https://minotar.net/helm/${member}/50`;
                    } else {
                        // Bedrock
                        playerDiv.addEventListener('click', (e) => {
                            const existing = document.querySelector(".tooltip-note");
                            if (existing) existing.remove();

                            const tooltip = document.createElement("div");
                            tooltip.className = "tooltip-note";
                            tooltip.textContent = "This player is a bedrock player, no profile available.";

                            tooltip.style.position = "absolute";
                            tooltip.style.left = e.pageX + 10 + "px";
                            tooltip.style.top = e.pageY + 10 + "px";
                            tooltip.style.background = "rgba(0,0,0,0.8)";
                            tooltip.style.color = "#fff";
                            tooltip.style.padding = "6px 10px";
                            tooltip.style.borderRadius = "6px";
                            tooltip.style.fontSize = "14px";
                            tooltip.style.pointerEvents = "none";
                            tooltip.style.zIndex = "1000";
                            tooltip.style.transition = "opacity 0.3s";

                            document.body.appendChild(tooltip);

                            setTimeout(() => {
                                tooltip.style.opacity = "0";
                                setTimeout(() => tooltip.remove(), 300);
                            }, 2000);
                        });

                        img.src = "https://minotar.net/helm/MHF_Steve/50";
                    }

                    img.alt = member;
                    img.style.borderRadius = '10%';
                    img.style.display = 'block';
                    img.style.marginBottom = '5px';

                    const name = document.createElement("span");
                    name.textContent = member;
                    name.style.fontSize = '0.7em';
                    name.style.wordBreak = 'break-word';

                    playerDiv.appendChild(img);
                    playerDiv.appendChild(name);
                    memberGrid.appendChild(playerDiv);
                });
            }

            section.appendChild(h2);
            section.appendChild(memberGrid);

            header.insertAdjacentElement("afterend", section);
        });
    });

    function parseCSV(text) {
        const rows = [];
        const lines = text.trim().split("\n");

        for (const line of lines) {
            const cells = [];
            let current = "";
            let insideQuotes = false;

            for (let i = 0; i < line.length; i++) {
                const char = line[i];

                if (char === '"' && line[i + 1] === '"') {
                    // Escaped quote
                    current += '"';
                    i++;
                } else if (char === '"') {
                    insideQuotes = !insideQuotes;
                } else if (char === ',' && !insideQuotes) {
                    cells.push(current.trim());
                    current = "";
                } else {
                    current += char;
                }
            }

            cells.push(current.trim()); // push last cell
            rows.push(cells);
        }

        return rows;
    }
</script>


</body>
</html>